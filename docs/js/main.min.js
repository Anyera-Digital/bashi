"use strict";const body=$("body"),header=$("header");let isTimerRegisterFlag=!1,isTimerRestoreFlag=!1;function smsTimer(t,o,e){const a=setInterval(function(){var e=(t%60).toString().padStart(2,"0"),s=t/60%60,s=Math.trunc(s).toString().padStart(2,"0");t<0?(clearInterval(a),o.addClass("hidden"),o.closest(".btn").removeClass("is-timer")):o.html(`еще раз через ${s}:`+e),--t},1e3)}function closePopup(e){e.closest(".popup-wrapper").removeClass("is-open"),body.removeClass("no-scroll")}let lastScrollTop=0;$(window).on("scroll",function(){var e=$(this).scrollTop();e>lastScrollTop?header.removeClass("is-fixed"):header.addClass("is-fixed"),lastScrollTop=e}),$(".js-switch-lang").on("click",function(){$(".language-menu").toggleClass("is-open")}),$(document).mouseup(function(e){var s=$(".language-menu");!s.is(e.target)&&0===s.has(e.target).length&&s.hasClass(".is-open")&&s.removeClass("is-open")}),$(".js-open-search").on("click",function(){$(this).next().addClass("is-open"),body.addClass("no-scroll")}),$(".js-close-search").on("click",function(){closePopup($(this)),$(".js-search .form__input").val("")}),$(document).mouseup(function(e){var s=$(".js-search"),t=s.closest(".popup-wrapper").hasClass("is-open");!s.is(e.target)&&0===s.has(e.target).length&&t&&($(".js-open-search").next().removeClass("is-open"),body.removeClass("no-scroll"))});const authElem=$(".js-auth-popup"),burger=(authElem&&(authElem.on("click",function(){$(this).next().addClass("is-open"),body.addClass("no-scroll")}),$(".js-auth-popup-close").on("click",function(){closePopup($(this))}),$(document).mouseup(function(e){var s=$(".auth-popup__content"),t=s.closest(".popup-wrapper").hasClass("is-open");!s.is(e.target)&&0===s.has(e.target).length&&t&&(s.closest(".popup-wrapper").removeClass("is-open"),body.removeClass("no-scroll"))}),$(document).mouseup(function(e){var s=$(".restore-popup__content"),t=s.closest(".popup-wrapper").hasClass("is-open");!s.is(e.target)&&0===s.has(e.target).length&&t&&(s.closest(".popup-wrapper").removeClass("is-open"),body.removeClass("no-scroll"))})),$(".js-mob-menu")),closeMenuBtn=$(".js-close-mob-menu"),mobMenuParent=burger.closest(".mobile-menu"),productPreviewSrcElem=(burger.on("click",function(){$(this).next().addClass("is-open"),body.addClass("no-scroll")}),closeMenuBtn.on("click",function(){$(this).closest(".popup-wrapper").removeClass("is-open"),body.removeClass("no-scroll")}),$(document).mouseup(function(e){var s=$(".mobile-menu__menu"),t=$(".mobile-menu .js-user-menu.popup-wrapper.is-open")[0];!s.is(e.target)&&0===s.has(e.target).length&&t&&($(".popup-wrapper",mobMenuParent).removeClass("is-open"),body.removeClass("no-scroll"))}),$(".js-product-preview")[0]&&new Swiper(".js-product-preview",{slidesPerView:1,spaceBetween:10,scrollbar:{el:".swiper-scrollbar"},breakpoints:{390:{slidesPerView:2},768:{slidesPerView:3,spaceBetween:15},1200:{slidesPerView:4},1800:{slidesPerView:5,spaceBetween:25}}}),$(".js-product-related")[0]&&new Swiper(".js-product-related",{slidesPerView:1,spaceBetween:10,breakpoints:{390:{slidesPerView:2},768:{slidesPerView:3},1800:{slidesPerView:4}}}),$(".js-preview-src"));function changePreview(e,s){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=e.closest(".product-preview__image");$("img",e).attr("src",s),$("[data-pagination-index]",e).removeClass("active"),$(`[data-pagination-index="${t}"]`,e).addClass("active")}productPreviewSrcElem&&(productPreviewSrcElem.on("mouseenter",function(e){var s=$(this).attr("data-image-preview-src"),t=$(this).attr("data-preview-index");changePreview($(this),s,t)}),productPreviewSrcElem.on("mouseleave",function(e){$(e.relatedTarget).attr("data-image-preview-src")||(e=$(e.target).siblings('[data-preview-index="1"]').attr("data-image-preview-src"),changePreview($(this),e))}));const personalCard=$(".js-personal-card"),formInput=(personalCard&&personalCard.on("click",function(){$(this).hasClass("is-rotated")?personalCard.removeClass("is-rotated"):(personalCard.removeClass("is-rotated"),$(this).addClass("is-rotated"))}),$(".form__input")),phoneMask=(formInput&&(formInput.on("focus",function(){$(this).addClass("is-focused")}),formInput.on("blur",function(){$(this).val()||$(this).removeClass("is-focused")})),$(".js-phone-mask")),select=(phoneMask[0]&&(phoneMask.mask("+7 999 999 99 99"),phoneMask.on("blur",function(){$(this).val()||$(this).removeClass("is-focused")})),$(".js-select2")),usrNameValidate=(select&&select.each(function(){$(this).select2({minimumResultsForSearch:20,dropdownParent:$(this).next(".dropDownSelect2"),width:"100%"})}),$(".js-validate-username")),usrEmailValidate=$(".js-validate-email"),postCodeValidate=$(".js-post-code");if(usrNameValidate[0]){const I=/[^a-zA-Zа-яА-Я\s]/gm;usrNameValidate.on("input",function(){this.value=this.value.replace(I,"")})}if(usrEmailValidate[0]){const J=/[а-яА-Я\s]/gm;usrEmailValidate.on("input",function(){this.value=this.value.replace(J,"")})}if(postCodeValidate[0]){const K=/[^0-9]/gm;postCodeValidate.on("input",function(){this.value=this.value.replace(K,"")})}const accountFormBtns=$(".account__form-action"),registrationForm=(accountFormBtns[0]&&($('.account__form-action [type="button"]').on("click",function(){$('.account__form-action [type="submit"]').removeClass("hidden"),$(this).addClass("hidden"),$(".account__edit-data").removeClass("hidden"),$(".account__show-data").addClass("hidden")}),$('.account__form-action [type="submit"]').on("click",function(e){e.preventDefault()})),$(".js-registration"));if(registrationForm){const M=/[^0-9]/gm;registrationForm.on("submit",function(e){e.preventDefault(),$('[name="password"]').val()!==$('[name="repeat-password"]').val()||(body.addClass("no-scroll"),$(".js-register-sms").addClass("is-open"),$(".js-register-sms-timer").removeClass("hidden"),isTimerRegisterFlag)||(isTimerRegisterFlag=!0,smsTimer(120,$(".js-register-sms-timer"),isTimerRegisterFlag))}),$(".js-sms-form-input").on("input",function(){this.value=this.value.replace(M,""),(1===$(this).val().length?$(this).next():$(this).prev()).focus()})}const restorePassLink=$(".js-restore-pass"),restorePassForm=$(".js-restore-sms-code"),accordionSwitch=(restorePassLink&&(restorePassLink.on("click",function(){setTimeout(()=>{$(".js-restore-sms").addClass("is-open"),body.addClass("no-scroll")},400)}),restorePassForm.on("submit",function(e){e.preventDefault(),$(".sms-code-heading__sent").removeClass("hidden"),$(".js-restore-sms-timer").removeClass("hidden"),isTimerRestoreFlag||(isTimerRestoreFlag=!0,$("[type='submit']",restorePassForm).addClass("is-timer"),smsTimer(120,$(".js-restore-sms-timer"),isTimerRestoreFlag))})),$(".js-accordion"));if(accordionSwitch&&accordionSwitch.on("click",function(){$(this).next().slideToggle(200),$(this).toggleClass("is-expanded")}),$(".js-gallery-top")[0]){const P=new Swiper(".js-gallery-thumbs",{spaceBetween:15,slidesPerView:"auto",direction:"vertical",loop:!1}),Q=new Swiper(".js-gallery-top",{thumbs:{swiper:P},pagination:{el:".swiper-pagination"}})}$(".js-categories")[0]&&new Swiper(".js-categories",{slidesPerView:1,spaceBetween:10,pagination:{el:".swiper-pagination"},breakpoints:{390:{slidesPerView:2},768:{slidesPerView:3},1440:{slidesPerView:3,spaceBetween:20}}});